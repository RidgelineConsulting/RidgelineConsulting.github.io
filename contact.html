<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact | Ridgeline Consulting</title>
    <meta name="description" content="Start a conversation with Ridgeline Consulting. No pitch, no pressure. Tell us what's going on and we'll tell you if we can help.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="styles.css">
    <meta property="og:title" content="Ridgeline Consulting">
    <meta property="og:description" content="Find the real problem. Build the fix.">
    <meta property="og:image" content="https://gferidgeline.com/og-image.png">
    <meta property="og:url" content="https://gferidgeline.com">
</head>
<body>

    <!-- NAVIGATION -->
    <nav>
        <div class="container">
            <a href="index.html" class="nav-logo">
                <img src="logo.svg" alt="Ridgeline Consulting">
            </a>
            <ul class="nav-links" id="navLinks">
                <li><a href="services.html">Services</a></li>
                <li><a href="work.html">Work</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html" class="nav-cta active">Let's Talk</a></li>
            </ul>
            <div class="mobile-toggle" id="mobileToggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- PAGE HEADER -->
    <div class="page-header">
        <div class="container">
            <div class="page-header-tag">Contact</div>
            <h1>Let's talk about what's broken.</h1>
            <p class="page-header-sub">No pitch. No pressure. Tell us what's going on and we'll tell you if we can help. If we can't, we'll say so.</p>
        </div>
    </div>

    <!-- CONTACT FORM + INFO -->
    <section class="contact-surface">
        <div class="container">
            <div class="contact-grid">
                <div class="contact-info">
                    <h3>How it works.</h3>
                    <p>Fill out the form or reach out directly. We'll get back to you within one business day. If there's a fit, we'll schedule a discovery call to dig into what's going on. No cost, no obligation. Just a real conversation about whether we can solve the problem you're sitting on.</p>

                    <div class="contact-details">
                        <div class="contact-line">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
                            (757) 589-5002
                        </div>
                        <div class="contact-line">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
                            andrew@gferidgeline.com
                        </div>
                        <div class="contact-line">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>
                            Wabash, Indiana
                        </div>
                    </div>
                </div>

                <form class="contact-form" id="contactForm" novalidate>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="name">Name</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="company_name">Company Name</label>
                        <input type="text" id="company_name" name="company_name" required>
                    </div>

                    <div class="form-group">
                        <label for="company_website">Company Website <span style="color: var(--text-muted);">(optional)</span></label>
                        <input type="url" id="company_website" name="company_website" placeholder="https://www.yourcompany.com">
                        <span class="form-error" id="websiteError" style="display:none;font-size:0.85rem;margin-top:4px;"></span>
                    </div>

                    <div class="form-group">
                        <label for="interest">What are you dealing with?</label>
                        <select id="interest" name="interest">
                            <option value="">Select one</option>
                            <option value="Not sure yet / need a diagnostic">Not sure yet / need a diagnostic</option>
                            <option value="Workforce & retention issues">Workforce &amp; retention issues</option>
                            <option value="Process documentation & systems">Process documentation &amp; systems</option>
                            <option value="Lead generation & pipeline">Lead generation &amp; pipeline</option>
                            <option value="Estimation & project systems">Estimation &amp; project systems</option>
                            <option value="Something else">Something else</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="message">Tell us what's going on</label>
                        <textarea id="message" name="message" rows="5" placeholder="What changed recently? Where does it hurt? What does 'fixed' look like for you?"></textarea>
                    </div>

                    <button type="submit" class="form-submit" id="submitBtn">Send Message</button>
                    <p class="form-note">We'll respond within one business day. No sales sequences. Just a real response.</p>
                    
                    <!-- Success/Error Messages -->
                    <div id="formSuccess" style="display:none;margin-top:16px;padding:16px;background:rgba(90,122,58,0.15);border:1px solid rgba(90,122,58,0.3);border-radius:8px;color:#5a7a3a;font-weight:500;">
                        Message received. We'll be in touch within one business day.
                    </div>
                    <div id="formError" style="display:none;margin-top:16px;padding:16px;background:rgba(192,57,43,0.1);border:1px solid rgba(192,57,43,0.3);border-radius:8px;color:#c0392b;font-weight:500;">
                        Something went wrong. Please email us directly at andrew@gferidgeline.com
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <div class="container">
            <div class="footer-inner">
                <div class="footer-logo-text"><span class="gfe">GFE</span> RIDGELINE CONSULTING</div>
                <ul class="footer-links">
                    <li><a href="services.html">Services</a></li>
                    <li><a href="work.html">Work</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </div>
            <p class="footer-copy">&copy; 2026 GFE Ridgeline Consulting, LLC. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Mobile nav toggle
        document.getElementById('mobileToggle').addEventListener('click', function() {
            document.getElementById('navLinks').classList.toggle('active');
        });
        window.addEventListener('scroll', function() {
            document.querySelector('nav').classList.toggle('scrolled', window.scrollY > 50);
        });
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
        }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

        // Real-time website validation on blur
        document.getElementById('company_website').addEventListener('blur', function() {
            const val = this.value.trim();
            const errorEl = document.getElementById('websiteError');
            
            if (!val) {
                // Empty is fine — it's optional
                errorEl.style.display = 'none';
                this.style.borderColor = '';
                return;
            }

            // Auto-prepend https:// if they forgot
            if (val && !val.startsWith('http://') && !val.startsWith('https://')) {
                this.value = 'https://' + val;
            }

            const currentVal = this.value.trim();

            try {
                const url = new URL(currentVal);
                if (!['http:', 'https:'].includes(url.protocol)) {
                    showWebsiteError('URL must start with http:// or https://');
                    return;
                }
                if (!url.hostname.includes('.')) {
                    showWebsiteError('That doesn\'t look like a full website address. Did you mean ' + url.hostname + '.com?');
                    return;
                }
                // Check for common typos
                const host = url.hostname.toLowerCase();
                if (host.endsWith('.cm') || host.endsWith('.con') || host.endsWith('.cmo') || host.endsWith('.co') && !host.endsWith('.co.uk') && !host.endsWith('.co.jp')) {
                    const suggestion = host.endsWith('.cm') ? host.replace('.cm', '.com') :
                                       host.endsWith('.con') ? host.replace('.con', '.com') :
                                       host.endsWith('.cmo') ? host.replace('.cmo', '.com') : null;
                    if (suggestion) {
                        showWebsiteWarning('Did you mean ' + url.protocol + '//' + suggestion + '?');
                        return;
                    }
                }
                // Valid URL
                errorEl.style.display = 'none';
                this.style.borderColor = 'rgba(90,122,58,0.5)';
            } catch {
                showWebsiteError('Please enter a valid website URL (e.g., https://www.yourcompany.com)');
            }

            function showWebsiteError(msg) {
                errorEl.textContent = msg;
                errorEl.style.color = '#c0392b';
                errorEl.style.display = 'block';
                document.getElementById('company_website').style.borderColor = '#c0392b';
            }

            function showWebsiteWarning(msg) {
                errorEl.textContent = msg;
                errorEl.style.color = '#d4a017';
                errorEl.style.display = 'block';
                document.getElementById('company_website').style.borderColor = '#d4a017';
            }
        });

        // Clear error on focus
        document.getElementById('company_website').addEventListener('focus', function() {
            document.getElementById('websiteError').style.display = 'none';
            this.style.borderColor = '';
        });

        // Form submission
        document.getElementById('contactForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const form = this;
            const submitBtn = document.getElementById('submitBtn');
            const successMsg = document.getElementById('formSuccess');
            const errorMsg = document.getElementById('formError');
            const websiteError = document.getElementById('websiteError');

            // Reset messages
            successMsg.style.display = 'none';
            errorMsg.style.display = 'none';
            websiteError.style.display = 'none';

            // Get values
            const name = form.name.value.trim();
            const email = form.email.value.trim();
            const companyName = form.company_name.value.trim();
            const companyWebsite = form.company_website.value.trim();
            const interest = form.interest.value;
            const message = form.message.value.trim();

            // Basic validation
            if (!name || !email || !companyName) {
                errorMsg.textContent = 'Please fill in your name, email, and company name.';
                errorMsg.style.display = 'block';
                return;
            }

            // Email validation
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                errorMsg.textContent = 'Please enter a valid email address.';
                errorMsg.style.display = 'block';
                return;
            }

            // Website validation (only if provided)
            if (companyWebsite) {
                try {
                    const url = new URL(companyWebsite);
                    if (!['http:', 'https:'].includes(url.protocol)) {
                        websiteError.style.display = 'block';
                        return;
                    }
                    // Check for at least one dot in hostname (e.g., company.com)
                    if (!url.hostname.includes('.')) {
                        websiteError.style.display = 'block';
                        return;
                    }
                } catch {
                    websiteError.style.display = 'block';
                    return;
                }
            }

            // Build needs from interest + message
            let needs = '';
            if (interest) needs += interest;
            if (interest && message) needs += ' — ';
            if (message) needs += message;

            // Build payload matching webhook expectations
            const payload = {
                name: name,
                email: email,
                company_name: companyName,
                company_website: companyWebsite || '',
                needs: needs || 'No details provided'
            };

            // Disable button
            submitBtn.disabled = true;
            submitBtn.textContent = 'Sending...';

            try {
                const response = await fetch('https://gferidgeline.app.n8n.cloud/webhook/prospect-inquiry', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (response.ok) {
                    successMsg.style.display = 'block';
                    form.reset();
                } else {
                    errorMsg.style.display = 'block';
                }
            } catch (err) {
                errorMsg.style.display = 'block';
            }

            submitBtn.disabled = false;
            submitBtn.textContent = 'Send Message';
        });
    </script>

</body>
</html>
